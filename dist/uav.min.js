!function(){function n(n,e){E(n,"push",function(){for(var r=arguments.length,t=Array(r),o=0;o<r;o++)t[o]=arguments[o];return t=t.map(h),Array.prototype.push.apply(n,t),n._loops.forEach(function(e){for(var r=n.length-t.length;r<n.length;r++)n._watch(r,n[r]),e.bind(n,r,!0)}),e(n,!0),n}),E(n,"pop",function(){n._loops.forEach(function(e){return e.remove(n.length-1)});var r=Array.prototype.pop.call(n);return e(n,!0),r}),E(n,"reverse",function(){return n._loops.forEach(function(e){for(var r=Array.from(e.node.children),t=n.length-1;t>=0;t--)e.node.appendChild(r[t])}),Array.prototype.reverse.call(n),e(n,!0),n}),E(n,"shift",function(){n._loops.forEach(function(n){return n.remove(0)});var r=Array.prototype.shift.call(n);return e(n,!0),r}),E(n,"sort",function(r){var t=Array.from(n);return Array.prototype.sort.call(n,r),n._loops.forEach(function(e){var r=[];n.forEach(function(n){return r.push(e.node.children[t.indexOf(n)])}),r.forEach(function(n,r){return e.node.insertBefore(n,e.node.children[r])})}),e(n,!0),n}),E(n,"splice",function(){for(var r=arguments.length,t=Array(r),o=0;o<r;o++)t[o]=arguments[o];var u=(t=t.map(h)).shift(),a=t.shift(),i=Array.prototype.splice.apply(n,[u,a].concat(t));if(n._loops){for(var c=0;c<a;c++)n._loops.forEach(function(n){return n.remove(u)});n._loops.forEach(function(e){t.forEach(function(r,t){n._watch(t,n[u+t]),e.bind(n,u+t,!0)})})}return e(n,!0),i}),E(n,"unshift",function(){for(var r=arguments.length,t=Array(r),o=0;o<r;o++)t[o]=arguments[o];return t=t.map(h),Array.prototype.unshift.apply(n,t),n._loops.forEach(function(e){t.forEach(function(r,t){n._watch(t,n[t]),e.bind(n,t,!0)})}),e(n,!0),n})}function e(n,e){var r=Array.from(document.querySelectorAll(n));return e?r.forEach(e):r}function r(n,e){x.tagRX=new RegExp("(^"+n+"|"+e+"$)","g"),x.expRX=new RegExp("("+n+".*?"+e+")","g")}function t(n,e){var r=e?e.cloneNode():b("div");return r.innerHTML=n,r.children.length>1&&console.error("Only 1 root node allowed."),r.firstElementChild}function o(n,e){try{return new Function("with(arguments[0]){return "+n+"}").call(e,e)}catch(n){return A}}function u(n){n&&n._uav&&(Array.from(n.children).forEach(u),n._uav.forEach(function(n){return n()}),n=null)}function a(n,e,r){var t=n.one?[n.tmpl]:n.tmpl.match(x.expRX);if(t){!function u(a,i){t.forEach(function(t){var c=w(t);r&&r.set(e),a&&(m=u);var f=o(c,e);m=null,r&&r.reset(e),g(f,"boolean")?f=f?c:"":void 0!==f&&null!==f&&f!==A||(f=""),n.replace(f,t,i)}),n.commit&&n.commit()}(!0)}}function i(n,e){Array.from(n.attributes).filter(function(n){return n.specified}).map(function(n){return{name:n.name,value:n.value}}).forEach(function(n){return e(n)}),n.value&&e({name:"value",value:n.value})}function c(n,e){var r=e.value,t=r;return{tmpl:r,replace:function(n,e){t=g(n,"function")?n:t.replace(e,n)},commit:function(){g(t,"function")?(n.removeAttribute(e.name),n[e.name]=t):n.setAttribute(e.name,t),t=r}}}function f(n,e,r,t){for(var o=void 0,u=0;u<_.length;u++){var i=_[u](n,e,r);i&&(n.removeAttribute(e.name),a(i,r,t),i.loop&&(o=!0))}return a(c(n,e),r,t),o}function l(n,e,r){a({tmpl:n.textContent,replace:function(e){if(e.tagName||e._el){var r=e._el?e._el:e;r!==n&&u(n),n.parentNode&&(n.parentNode.replaceChild(r,n),n=r)}else try{n.textContent=e}catch(e){n.innerHTML=""}}},e,r)}function p(n,e,r){var t=n.textContent.split(x.expRX);if(t.length>1){var o=n.parentNode;t.forEach(function(t){if(t.trim()){var u=document.createTextNode(t);o.insertBefore(u,n),l(u,e,r)}}),o.removeChild(n)}}function v(n,e,r){var t=void 0;return y=n,E(y,"_uav",[]),i(n,function(o){f(n,o,e,r)&&(t=!0)}),t?n:(Array.from(n.childNodes).forEach(function(n){3===n.nodeType?p(n,e,r):v(n,e,r)}),n)}function s(n){return!(!n||!g(n,"object")||n._uav||n.tagName)}function d(n,e){n&&n._uav&&e&&(Object.keys(n).forEach(function(r){d(n[r],e[r])}),e._uav=n._uav,n=null)}function h(e){if(!s(e))return e;var r={};return Array.isArray(e)&&E(r=[],"_loops",[]),E(r,"_uav",{}),E(r,"_watch",function(t,o){function u(e){return s(e)&&(e=h(e)),Array.isArray(e)&&n(e,a),e}function a(n,o){(e[t]!==n||g(n,"object"))&&(s(n)&&(n=u(n),e[t]&&e[t]._uav&&d(e[t],n)),e[t]=n,r._uav[t]&&r._uav[t].forEach(function(n){return n(!1,o)}))}e[t]=u(o),Object.defineProperty(r,t,{get:function(){if(m){var n=m;r._uav[t]=r._uav[t]||[],r._uav[t].push(n),y._uav.push(function(){var e=r._uav[t].indexOf(n);r._uav[t].splice(e,1),n=null})}return x.lastAccessed={vm:r,key:t},e[t]},set:a,enumerable:!0,configurable:!0})}),Object.keys(e).forEach(function(n){return r._watch(n,e[n])}),r}Array.from||(Array.from=function(n){return[].slice.call(n)});var m=void 0,y=void 0,_=[],A="_u_badexp",b=function(n){return document.createElement(n)},g=function(n,e){return typeof n===e},E=function(n,e,r){return Object.defineProperty(n,e,{value:r,configurable:!0,writable:!0,enumerable:!1})},x=window.uav=function(n,r){return r?e(n,r):document.querySelector(n)||b("div")};r("{","}");var w=function(n){return n.replace(x.tagRX,"")};_.push(function(n,e,r){if("uav-loop"===e.name){var o=n.getAttribute("uav-as").split(",");n.removeAttribute("uav-as");var a={node:n,as:o[0],index:o[1],html:n.innerHTML,remove:function(e){n.children[e]&&(u(n.children[e]),n.children[e].remove())},bind:function(n,e,o){function u(i){var c=a.node.children[e],f=t(a.html,a.node),l=r[a.as],p=r[a.index],s={set:function(r){r[a.as]=n[e],a.index&&(r[a.index]=e)},reset:function(n){n[a.as]=l,a.index&&(n[a.index]=p)}};i&&(m=u),o&&i&&c?a.node.insertBefore(v(f,r,s),c):c?a.node.replaceChild(v(f,r,s),c):a.node.appendChild(v(f,r,s)),m=null}u(!0)}};return{loop:!0,tmpl:e.value,one:!0,replace:function(e,r,t){t||(n.innerHTML="",-1===(e=h(e))._loops.indexOf(a)&&e._loops.push(a),e.forEach(function(n,r){return a.bind(e,r)}))}}}}),_.push(function(n,e){if("style"===e.name||"uav-style"===e.name){var r=e.value,t=r;return{tmpl:r,replace:function(n,e){t=t.replace(e,n)},commit:function(){n.style.cssText=t,t=r}}}}),_.push(function(n,e){if("uav-src"===e.name){var r=e.value,t=r;return{tmpl:r,replace:function(n,e){t=t.replace(e,n)},commit:function(){n.setAttribute("src",t),t=r}}}}),_.push(function(n,e){if("uav-attr"===e.name){var r=void 0;return{tmpl:e.value,replace:function(e){r&&n.removeAttribute(r),e&&(n.setAttribute(e,""),r=e)}}}}),x.attributes=_,x.evaluate=o,x.stripTags=w,x.all=e,x.component=function(n,e,r){var o=arguments;if(g(n,"string")?(n={_el:t(n)},r=e):(n=h(n))._el=v(t(e),n),g(r,"string")||r&&r.tagName){var a=r.tagName?r:x(r),i=a.firstElementChild;setTimeout(function(){return u(i)}),a.innerHTML="",a.appendChild(n._el)}for(var c=0;c<arguments.length&&"break"!==function(e){if(g(o[e],"function"))return setTimeout(function(){return o[e](n._el)}),"break"}(c);c++);return n},x.model=h,x.parse=t,x.setTag=r,x.unbind=u,"undefined"!=typeof module&&module.exports&&(module.exports=x)}();