!function(){function e(e,n){var r=Array.from(document.querySelectorAll(e));return n?r.forEach(n):r}function n(e,n){E.tagRX=new RegExp("(^"+e+"|"+n+"$)","g"),E.expRX=new RegExp("("+e+".*?"+n+")","g")}function r(e,n){var r=n?n.cloneNode():A("div");return r.innerHTML=e,r.children.length>1&&console.error("Only 1 root node allowed."),r.firstElementChild}function t(e,n){try{return new Function("with(arguments[0]){return "+e+"}")(n)}catch(e){return _}}function o(e){e&&e._uav&&(Array.from(e.children).forEach(o),e._uav.forEach(function(e){return e()}),e=null)}function u(e,n,r){var o=e.one?[e.tmpl]:e.tmpl.match(E.expRX);if(o){!function u(a){o.forEach(function(o){var i=x(o);r&&r.set(n),a&&(d=u);var c=t(i,n);r&&r.reset(n),d=null,g(c,"boolean")?c=c?i:"":void 0!==c&&null!==c&&c!==_||(c=""),e.replace(c,o)}),e.commit&&e.commit()}(!0)}}function a(e,n){Array.from(e.attributes).filter(function(e){return e.specified}).map(function(e){return{name:e.name,value:e.value}}).forEach(function(e){return n(e)}),e.value&&n({name:"value",value:e.value})}function i(e,n){var r=n.value,t=r;return{tmpl:r,replace:function(e,n){t=g(e,"function")?e:t.replace(n,e)},commit:function(){g(t,"function")?(e.removeAttribute(n.name),e[n.name]=t):e.setAttribute(n.name,t),t=r}}}function c(e,n,r,t){for(var o=void 0,a=0;a<y.length;a++){var c=y[a](e,n,r);c&&(e.removeAttribute(n.name),u(c,r,t),c.loop&&(o=!0))}return u(i(e,n),r,t),o}function f(e,n,r){u({tmpl:e.textContent,replace:function(n){if(n.tagName||n._el){var r=n._el?n._el:n;r!==e&&o(e),e.parentNode&&(e.parentNode.replaceChild(r,e),e=r)}else try{e.textContent=n}catch(n){e.innerHTML=""}}},n,r)}function l(e,n,r){var t=e.textContent.split(E.expRX),o=e.parentNode,u=e;t.forEach(function(e){if(e){var t=document.createTextNode(e);o.insertBefore(t,u.nextSibling),f(t,n,r),u=t}}),o.removeChild(e)}function p(e,n,r){var t=void 0;return h=e,b(h,"_uav",[]),a(e,function(o){c(e,o,n,r)&&(t=!0)}),t?e:(Array.from(e.childNodes).forEach(function(e){3===e.nodeType?l(e,n,r):p(e,n,r)}),e)}function v(e){return!(!e||!g(e,"object")||e._uav||e.tagName)}function s(e,n){e&&e._uav&&n&&(Object.keys(e).forEach(function(r){s(e[r],n[r])}),n._uav=e._uav,e=null)}function m(e){if(!v(e))return e;var n=Array.isArray(e)?[]:{};return b(n,"_uav",{}),Object.keys(e).forEach(function(r){function t(e){return v(e)&&(e=m(e)),e}e[r]=t(e[r]),Object.defineProperty(n,r,{get:function(){if(d){var t=d;n._uav[r]=n._uav[r]||[],n._uav[r].push(t),h._uav.push(function(){var e=n._uav[r].indexOf(t);n._uav[r].splice(e,1),t=null})}return E.lastAccessed={vm:n,key:r},e[r]},set:function(o){(e[r]!==o||g(o,"object"))&&(v(o)&&(o=t(o),e[r]&&e[r]._uav&&s(e[r],o)),e[r]=o,n._uav[r]&&n._uav[r].forEach(function(e){return e()}))},enumerable:!0,configurable:!0})}),n}Array.from||(Array.from=function(e){return[].slice.call(e)});var d=void 0,h=void 0,y=[],_="_u_badexp",A=function(e){return document.createElement(e)},g=function(e,n){return typeof e===n},b=function(e,n,r){return Object.defineProperty(e,n,{value:r,configurable:!0,writable:!0,enumerable:!1})},E=window.uav=function(n,r){return r?e(n,r):document.querySelector(n)||A("div")};n("{","}");var x=function(e){return e.replace(E.tagRX,"")};y.push(function(e,n,t){if("uav-loop"===n.name){var u=e.getAttribute("uav-as").split(",");e.removeAttribute("uav-as");var a={node:e,as:u[0],index:u[1],html:e.innerHTML,remove:function(n){e.children[n]&&(o(e.children[n]),e.children[n].remove())}};return e.innerHTML="",{loop:!0,tmpl:n.value,one:!0,replace:function(e){function n(n,u,i){function c(e){f.forEach(function(a){var f=a.node.children[u],l=r(a.html,a.node);e&&(d=c);var v=t[a.as],s=t[a.index],m={set:function(e){e[a.as]=n,e[a.index]=u},reset:function(e){e[a.as]=v,e[a.index]=s}};i&&f?a.node.insertBefore(p(l,t,m),f):f?(o(f),a.node.replaceChild(p(l,t,m),f)):a.node.appendChild(p(l,t,m)),d=null})}var f=i?e._loops:[a];c(!0)}(e=m(e))._loops||b(e,"_loops",[]),-1===e._loops.indexOf(a)&&e._loops.push(a),b(e,"push",function(){for(var r=arguments.length,t=Array(r),o=0;o<r;o++)t[o]=arguments[o];return(t=t.map(m)).forEach(function(r,t){return n(r,e.length+t,!0)}),Array.prototype.push.apply(e,t)}),b(e,"pop",function(){return e._loops.forEach(function(n){return n.remove(e.length-1)}),Array.prototype.pop.apply(e)}),b(e,"reverse",function(){return Array.prototype.reverse.apply(e),e._loops.forEach(function(n){for(var r=Array.from(n.node.children),t=e.length-1;t>=0;t--)n.node.appendChild(r[t])}),e}),b(e,"shift",function(){return e._loops.forEach(function(e){return e.remove(0)}),Array.prototype.shift.apply(e)}),b(e,"sort",function(n){var r=Array.from(e);return Array.prototype.sort.call(e,n),e._loops.forEach(function(n){var t=[];e.forEach(function(e){return t.push(n.node.children[r.indexOf(e)])}),t.forEach(function(e,r){return n.node.insertBefore(e,n.node.children[r])})}),e}),b(e,"splice",function(r,t){for(var o=arguments.length,u=Array(o>2?o-2:0),a=2;a<o;a++)u[a-2]=arguments[a];return u=u.map(m),e._loops.forEach(function(e){for(var n=0;n<t;n++)e.remove(r)}),u.forEach(function(e,t){return n(e,r+t,!0)}),Array.prototype.splice.apply(e,[r,t].concat(u))}),b(e,"unshift",function(){for(var r=arguments.length,t=Array(r),o=0;o<r;o++)t[o]=arguments[o];return(t=t.map(m)).forEach(function(e,r){return n(e,r,!0)}),Array.prototype.unshift.apply(e,t),e}),e.forEach(function(e,r){return n(e,r)})}}}}),y.push(function(e,n){if("style"===n.name||"uav-style"===n.name){var r=n.value,t=r;return{tmpl:r,replace:function(e,n){t=t.replace(n,e)},commit:function(){e.style.cssText=t,t=r}}}}),y.push(function(e,n){if("uav-src"===n.name){var r=n.value,t=r;return{tmpl:r,replace:function(e,n){t=t.replace(n,e)},commit:function(){e.setAttribute("src",t),t=r}}}}),y.push(function(e,n){if("uav-attr"===n.name){var r=void 0;return{tmpl:n.value,replace:function(n){r&&e.removeAttribute(r),n&&(e.setAttribute(n,""),r=n)}}}}),E.attributes=y,E.evaluate=t,E.stripTags=x,E.all=e,E.component=function(e,n,t){var u=arguments;if(g(e,"string")?(e={_el:r(e)},t=n):(e=m(e))._el=p(r(n),e),g(t,"string")||t&&t.tagName){var a=t.tagName?t:E(t),i=a.firstElementChild;requestAnimationFrame(function(){return o(i)}),a.innerHTML="",a.appendChild(e._el)}for(var c=0;c<arguments.length&&"break"!==function(n){if(g(u[n],"function"))return requestAnimationFrame(function(){return u[n](e._el)}),"break"}(c);c++);return e},E.model=m,E.parse=r,E.setTag=n,E.unbind=o,"undefined"!=typeof module&&module.exports&&(module.exports=E)}();