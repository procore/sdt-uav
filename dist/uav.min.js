!function(){function e(e,n){var r=Array.from(document.querySelectorAll(e));return n?r.forEach(n):r}function n(e,n){E.tagRX=new RegExp("(^"+e+"|"+n+"$)","g"),E.expRX=new RegExp("("+e+".*?"+n+")","g")}function r(e,n){var r=n?n.cloneNode():g("div");return r.innerHTML=e,r.children.length>1&&console.error("Only 1 root node allowed."),r.firstElementChild}function t(e,n){try{return new Function("with(arguments[0]){return "+e+"}")(n)}catch(e){return A}}function u(e){e&&e._uav&&(Array.from(e.children).forEach(u),e._uav.forEach(function(e){return e()}),e=null)}function o(e,n,r){var u=e.one?[e.tmpl]:e.tmpl.match(E.expRX);if(u){!function o(a){u.forEach(function(u){var i=x(u);r&&r.set(n),a&&(h=o);var c=t(i,n);r&&r.reset(n),h=null,b(c,"boolean")?c=c?i:"":void 0!==c&&null!==c&&c!==A||(c=""),e.replace(c,u)}),e.commit&&e.commit()}(!0)}}function a(e,n){Array.from(e.attributes).filter(function(e){return e.specified}).map(function(e){return{name:e.name,value:e.value}}).forEach(function(e){return n(e)}),e.value&&n({name:"value",value:e.value})}function i(e,n){var r=n.value,t=r;return{tmpl:r,replace:function(e,n){t=b(e,"function")?e:t.replace(n,e)},commit:function(){b(t,"function")?(e.removeAttribute(n.name),e[n.name]=t):e.setAttribute(n.name,t),t=r}}}function c(e,n,r,t){for(var u=void 0,a=0;a<y.length;a++){var c=y[a](e,n,r);c&&(e.removeAttribute(n.name),o(c,r,t),c.loop&&(u=!0))}return o(i(e,n),r,t),u}function f(e,n,r){o({tmpl:e.textContent,replace:function(n){if(n.tagName||n._el){var r=n._el?n._el:n;r!==e&&u(e),e.parentNode&&(e.parentNode.replaceChild(r,e),e=r)}else try{e.textContent=n}catch(n){e.innerHTML=""}}},n,r)}function l(e,n,r){var t=e.textContent.split(E.expRX),u=e.parentNode,o=e;t.forEach(function(e){if(e){var t=document.createTextNode(e);u.insertBefore(t,o.nextSibling),f(t,n,r),o=t}}),u.removeChild(e)}function p(e,n,r){var t=void 0;return d=e,_(d,"_uav",[]),a(e,function(u){c(e,u,n,r)&&(t=!0)}),t?e:(Array.from(e.childNodes).forEach(function(e){3===e.nodeType?l(e,n,r):p(e,n,r)}),e)}function v(e){return!(!e||!b(e,"object")||e._uav||e.tagName)}function m(e,n){e&&e._uav&&n&&(Object.keys(e).forEach(function(r){m(e[r],n[r])}),n._uav=e._uav,e=null)}function s(e){if(!v(e))return e;var n=Array.isArray(e)?[]:{};return _(n,"_uav",{}),Object.keys(e).forEach(function(r){function t(e){return v(e)&&(e=s(e)),e}e[r]=t(e[r]),Object.defineProperty(n,r,{get:function(){if(h){var t=h;n._uav[r]=n._uav[r]||[],n._uav[r].push(t),d._uav.push(function(){var e=n._uav[r].indexOf(t);n._uav[r].splice(e,1),t=null})}return E.lastAccessed={vm:n,key:r},e[r]},set:function(u){(e[r]!==u||b(u,"object"))&&(v(u)&&(u=t(u),e[r]&&e[r]._uav&&m(e[r],u)),e[r]=u,n._uav[r]&&n._uav[r].forEach(function(e){return e()}))},enumerable:!0,configurable:!0})}),n}Array.from||(Array.from=function(e){return[].slice.call(e)});var h=void 0,d=void 0,y=[],A="_u_badexp",g=function(e){return document.createElement(e)},b=function(e,n){return typeof e===n},_=function(e,n,r){return Object.defineProperty(e,n,{value:r,configurable:!0,writable:!0,enumerable:!1})},E=window.uav=function(n,r){return r?e(n,r):document.querySelector(n)||g("div")};n("{","}");var x=function(e){return e.replace(E.tagRX,"")};y.push(function(e,n,t){if("uav-loop"===n.name){var o=function(n){e.children[n]&&(u(e.children[n]),e.children[n].remove())},a=r(e.innerHTML,e);e.innerHTML="";var i=e.getAttribute("uav-as").split(","),c=i[0],f=i[1];return e.removeAttribute("uav-as"),{loop:!0,tmpl:n.value,one:!0,replace:function(n){function r(n,r,o){function i(l){var v=e.children[r],m=a.cloneNode();m.innerHTML=a.innerHTML,l&&(h=i);var s=t[c],d=t[f],y={set:function(e){e[c]=n,e[f]=r},reset:function(e){e[c]=s,e[f]=d}};o&&v?e.insertBefore(p(m,t,y),v):v?(u(v),e.replaceChild(p(m,t,y),v)):e.appendChild(p(m,t,y)),h=null}i(!0)}n=s(n),_(n,"push",function(){for(var e=arguments.length,t=Array(e),u=0;u<e;u++)t[u]=arguments[u];return(t=t.map(s)).forEach(function(e,t){return r(e,n.length+t,!0)}),Array.prototype.push.apply(n,t)}),_(n,"pop",function(){return o(n.length-1),Array.prototype.pop.apply(n)}),_(n,"reverse",function(){Array.prototype.reverse.apply(n);for(var r=Array.from(e.children),t=n.length-1;t>=0;t--)e.appendChild(r[t]);return n}),_(n,"shift",function(){return o(0),Array.prototype.shift.apply(n)}),_(n,"sort",function(r){var t=[],u=Array.from(n);return Array.prototype.sort.call(n,r),n.forEach(function(n){return t.push(e.children[u.indexOf(n)])}),t.forEach(function(n,r){return e.insertBefore(n,e.children[r])}),n}),_(n,"splice",function(e,t){for(var u=arguments.length,a=Array(u>2?u-2:0),i=2;i<u;i++)a[i-2]=arguments[i];for(var c=0;c<t;c++)o(e);return(a=a.map(s)).forEach(function(n,t){return r(n,e+t,!0)}),Array.prototype.splice.apply(n,[e,t].concat(a))}),_(n,"unshift",function(){for(var e=arguments.length,t=Array(e),u=0;u<e;u++)t[u]=arguments[u];return(t=t.map(s)).forEach(function(e,n){return r(e,n,!0)}),Array.prototype.unshift.apply(n,t),n}),n.forEach(r)}}}}),y.push(function(e,n){if("style"===n.name||"uav-style"===n.name){var r=n.value,t=r;return{tmpl:r,replace:function(e,n){t=t.replace(n,e)},commit:function(){e.style.cssText=t,t=r}}}}),y.push(function(e,n){if("uav-src"===n.name){var r=n.value,t=r;return{tmpl:r,replace:function(e,n){t=t.replace(n,e)},commit:function(){e.setAttribute("src",t),t=r}}}}),y.push(function(e,n){if("uav-attr"===n.name){var r=void 0;return{tmpl:n.value,replace:function(n){r&&e.removeAttribute(r),n&&(e.setAttribute(n,""),r=n)}}}}),E.attributes=y,E.evaluate=t,E.stripTags=x,E.all=e,E.component=function(e,n,t){var o=arguments;if(b(e,"string")?(e={_el:r(e)},t=n):(e=s(e))._el=p(r(n),e),b(t,"string")||t&&t.tagName){var a=t.tagName?t:E(t),i=a.firstElementChild;requestAnimationFrame(function(){return u(i)}),a.innerHTML="",a.appendChild(e._el)}for(var c=0;c<arguments.length&&"break"!==function(n){if(b(o[n],"function"))return requestAnimationFrame(function(){return o[n](e._el)}),"break"}(c);c++);return e},E.model=s,E.parse=r,E.setTag=n,E.unbind=u,"undefined"!=typeof module&&module.exports&&(module.exports=E)}();