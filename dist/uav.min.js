!function(){function n(n,e){E(n,"push",function(){for(var r=arguments.length,t=Array(r),o=0;o<r;o++)t[o]=arguments[o];return t=t.map(m),Array.prototype.push.apply(n,t),n._loops.forEach(function(e){for(var r=n.length-t.length;r<n.length;r++)e.bind(n,n[r],r,!0)}),e(n,!0),n}),E(n,"pop",function(){n._loops.forEach(function(e){return e.remove(n.length-1)});var r=Array.prototype.pop.call(n);return e(n,!0),r}),E(n,"reverse",function(){return n._loops.forEach(function(e){for(var r=Array.from(e.node.children),t=n.length-1;t>=0;t--)e.node.appendChild(r[t])}),Array.prototype.reverse.call(n),e(n,!0),n}),E(n,"shift",function(){n._loops.forEach(function(n){return n.remove(0)});var r=Array.prototype.shift.call(n);return e(n,!0),r}),E(n,"sort",function(r){var t=Array.from(n);return Array.prototype.sort.call(n,r),n._loops.forEach(function(e){var r=[];n.forEach(function(n){return r.push(e.node.children[t.indexOf(n)])}),r.forEach(function(n,r){return e.node.insertBefore(n,e.node.children[r])})}),e(n,!0),n}),E(n,"splice",function(){for(var r=arguments.length,t=Array(r),o=0;o<r;o++)t[o]=arguments[o];var u=(t=t.map(m)).shift(),a=t.shift(),i=Array.prototype.splice.apply(n,[u,a].concat(t));if(n._loops){for(var c=0;c<a;c++)n._loops.forEach(function(n){return n.remove(u)});n._loops.forEach(function(e){t.forEach(function(r,t){return e.bind(n,r,u+t,!0)})})}return e(n,!0),i}),E(n,"unshift",function(){for(var r=arguments.length,t=Array(r),o=0;o<r;o++)t[o]=arguments[o];return t=t.map(m),n._loops.forEach(function(e){t.forEach(function(r,t){return e.bind(n,r,t,!0)})}),Array.prototype.unshift.apply(n,t),e(n,!0),n})}function e(n,e){var r=Array.from(document.querySelectorAll(n));return e?r.forEach(e):r}function r(n,e){x.tagRX=new RegExp("(^"+n+"|"+e+"$)","g"),x.expRX=new RegExp("("+n+".*?"+e+")","g")}function t(n,e){var r=e?e.cloneNode():A("div");return r.innerHTML=n,r.children.length>1&&console.error("Only 1 root node allowed."),r.firstElementChild}function o(n,e){try{return new Function("with(arguments[0]){return "+n+"}")(e)}catch(n){return g}}function u(n){n&&n._uav&&(Array.from(n.children).forEach(u),n._uav.forEach(function(n){return n()}),n=null)}function a(n,e,r){var t=n.one?[n.tmpl]:n.tmpl.match(x.expRX);if(t){!function u(a,i){t.forEach(function(t){var c=C(t);r&&r.set(e),a&&(h=u);var f=o(c,e);h=null,r&&r.reset(e),b(f,"boolean")?f=f?c:"":void 0!==f&&null!==f&&f!==g||(f=""),n.replace(f,t,i)}),n.commit&&n.commit()}(!0)}}function i(n,e){Array.from(n.attributes).filter(function(n){return n.specified}).map(function(n){return{name:n.name,value:n.value}}).forEach(function(n){return e(n)}),n.value&&e({name:"value",value:n.value})}function c(n,e){var r=e.value,t=r;return{tmpl:r,replace:function(n,e){t=b(n,"function")?n:t.replace(e,n)},commit:function(){b(t,"function")?(n.removeAttribute(e.name),n[e.name]=t):n.setAttribute(e.name,t),t=r}}}function f(n,e,r,t){for(var o=void 0,u=0;u<_.length;u++){var i=_[u](n,e,r);i&&(n.removeAttribute(e.name),a(i,r,t),i.loop&&(o=!0))}return a(c(n,e),r,t),o}function l(n,e,r){a({tmpl:n.textContent,replace:function(e){if(e.tagName||e._el){var r=e._el?e._el:e;r!==n&&u(n),n.parentNode&&(n.parentNode.replaceChild(r,n),n=r)}else try{n.textContent=e}catch(e){n.innerHTML=""}}},e,r)}function p(n,e,r){var t=n.textContent.split(x.expRX),o=n.parentNode,u=n;t.forEach(function(n){if(n){var t=document.createTextNode(n);o.insertBefore(t,u.nextSibling),l(t,e,r),u=t}}),o.removeChild(n)}function v(n,e,r){var t=void 0;return y=n,E(y,"_uav",[]),i(n,function(o){f(n,o,e,r)&&(t=!0)}),t?n:(Array.from(n.childNodes).forEach(function(n){3===n.nodeType?p(n,e,r):v(n,e,r)}),n)}function s(n){return!(!n||!b(n,"object")||n._uav||n.tagName)}function d(n,e){n&&n._uav&&e&&(Object.keys(n).forEach(function(r){d(n[r],e[r])}),e._uav=n._uav,n=null)}function m(e){if(!s(e))return e;var r={};return Array.isArray(e)&&E(r=[],"_loops",[]),E(r,"_uav",{}),Object.keys(e).forEach(function(t){function o(e){return s(e)&&(e=m(e)),Array.isArray(e)&&n(e,u),e}function u(n,u){(e[t]!==n||b(n,"object"))&&(s(n)&&(n=o(n),e[t]&&e[t]._uav&&d(e[t],n)),e[t]=n,r._uav[t]&&r._uav[t].forEach(function(n){return n(!1,u)}))}e[t]=o(e[t]),Object.defineProperty(r,t,{get:function(){if(h){var n=h;r._uav[t]=r._uav[t]||[],r._uav[t].push(n),y._uav.push(function(){var e=r._uav[t].indexOf(n);r._uav[t].splice(e,1),n=null})}return x.lastAccessed={vm:r,key:t},e[t]},set:u,enumerable:!0,configurable:!0})}),r}Array.from||(Array.from=function(n){return[].slice.call(n)});var h=void 0,y=void 0,_=[],g="_u_badexp",A=function(n){return document.createElement(n)},b=function(n,e){return typeof n===e},E=function(n,e,r){return Object.defineProperty(n,e,{value:r,configurable:!0,writable:!0,enumerable:!1})},x=window.uav=function(n,r){return r?e(n,r):document.querySelector(n)||A("div")};r("{","}");var C=function(n){return n.replace(x.tagRX,"")};_.push(function(n,e,r){if("uav-loop"===e.name){var o=n.getAttribute("uav-as").split(",");n.removeAttribute("uav-as");var a={node:n,as:o[0],index:o[1],html:n.innerHTML,remove:function(e){n.children[e]&&(u(n.children[e]),n.children[e].remove())},bind:function(n,e,o,i){function c(){console.log("creating binding",a.as);var n=a.node.children[o],c=t(a.html,a.node),f=r[a.as],l=r[a.index],p={set:function(n){n[a.as]=e,n[a.index]=o},reset:function(n){n[a.as]=f,n[a.index]=l}};i&&n?a.node.insertBefore(v(c,r,p),n):n?(u(n),a.node.replaceChild(v(c,r,p),n)):a.node.appendChild(v(c,r,p))}h=c,c(),h=null}};return{loop:!0,tmpl:e.value,one:!0,replace:function(e,r,t){t||(n.innerHTML="",-1===(e=m(e))._loops.indexOf(a)&&e._loops.push(a),e.forEach(function(n,r){return a.bind(e,n,r)}))}}}}),_.push(function(n,e){if("style"===e.name||"uav-style"===e.name){var r=e.value,t=r;return{tmpl:r,replace:function(n,e){t=t.replace(e,n)},commit:function(){n.style.cssText=t,t=r}}}}),_.push(function(n,e){if("uav-src"===e.name){var r=e.value,t=r;return{tmpl:r,replace:function(n,e){t=t.replace(e,n)},commit:function(){n.setAttribute("src",t),t=r}}}}),_.push(function(n,e){if("uav-attr"===e.name){var r=void 0;return{tmpl:e.value,replace:function(e){r&&n.removeAttribute(r),e&&(n.setAttribute(e,""),r=e)}}}}),x.attributes=_,x.evaluate=o,x.stripTags=C,x.all=e,x.component=function(n,e,r){var o=arguments;if(b(n,"string")?(n={_el:t(n)},r=e):(n=m(n))._el=v(t(e),n),b(r,"string")||r&&r.tagName){var a=r.tagName?r:x(r),i=a.firstElementChild;requestAnimationFrame(function(){return u(i)}),a.innerHTML="",a.appendChild(n._el)}for(var c=0;c<arguments.length&&"break"!==function(e){if(b(o[e],"function"))return requestAnimationFrame(function(){return o[e](n._el)}),"break"}(c);c++);return n},x.model=m,x.parse=t,x.setTag=r,x.unbind=u,"undefined"!=typeof module&&module.exports&&(module.exports=x)}();