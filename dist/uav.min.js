!function(){function n(n){E(n,"push",function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var o=n.length;return(t=t.map(h)).forEach(function(e){return n._watch(e,n.length)}),n._loops.forEach(function(n){t.forEach(function(e,t){n.binding(e,o+t)})}),n}),E(n,"pop",function(){return n._loops.forEach(function(e){return e.remove(n.length-1)}),Array.prototype.pop.call(n)}),E(n,"shift",function(){return n._loops.forEach(function(n){return n.remove(0)}),Array.prototype.shift.call(n)}),E(n,"splice",function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var o=n.length,u=t.shift(),a=t.shift();t=t.map(h);for(var i=Array.prototype.splice.apply(n,[u,a].concat(t)),c=o;c<n.length;c++)!function(e){n._watch(n[e],e),n._loops.forEach(function(t){return t.binding(n[e],e)})}(c);for(c=n.length;c<o;c++)!function(e){n._loops.forEach(function(n){return n.remove(e)})}(c);return i}),E(n,"unshift",function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var o=n.length;t=t.map(h),Array.prototype.unshift.apply(n,t);for(var u=o;u<n.length;u++)!function(e){n._watch(n[e],e),n._loops.forEach(function(t){return t.binding(n[e],e)})}(u);return n})}function e(n,e){var t=Array.from(document.querySelectorAll(n));return e?t.forEach(e):t}function t(n,e){x.tagRX=new RegExp("(^"+n+"|"+e+"$)","g"),x.expRX=new RegExp("("+n+".*?"+e+")","g")}function r(n,e){var t=e?e.cloneNode():b("div");return t.innerHTML=n,1!==t.children.length&&console.error("Template must have 1 root node:",n),t.firstElementChild}function o(n,e){try{return new Function("with(arguments[0]){return "+n+"}")(e)}catch(n){return y}}function u(n){n&&n._uav&&(Array.from(n.children).forEach(u),n._uav.forEach(function(n){return n()}),n=null)}function a(n,e,t){var r=n.one?[n.tmpl]:n.tmpl.match(x.expRX);if(r){!function u(a){r.forEach(function(r){var i=T(r);a&&(d=u),t&&t.set(e);var c=o(i,e);d=null,t&&t.reset(e),A(c,"boolean")?c=c?i:"":void 0!==c&&null!==c&&c!==y||(c=""),n.replace(c,r)}),n.commit&&n.commit()}(!0)}}function i(n,e){Array.from(n.attributes).filter(function(n){return n.specified}).map(function(n){return{name:n.name,value:n.value}}).forEach(function(n){return e(n)}),n.value&&e({name:"value",value:n.value})}function c(n,e){var t=e.value,r=t;return{tmpl:t,replace:function(n,e){r=A(n,"function")?n:r.replace(e,n)},commit:function(){A(r,"function")?(n.removeAttribute(e.name),n[e.name]=r):n.setAttribute(e.name,r),r=t}}}function f(n,e,t,r){for(var o=void 0,u=0;u<g.length;u++){var i=g[u](n,e,t);i&&(n.removeAttribute(e.name),a(i,t,r),i.loop&&(o=!0))}return a(c(n,e),t,r),o}function l(n,e,t){a({tmpl:n.textContent,replace:function(e){if(e.tagName||e._el){var t=e._el?e._el:e;t!==n&&u(n),n.parentNode&&(n.parentNode.replaceChild(t,n),n=t)}else try{n.textContent=e}catch(e){n.innerHTML=""}}},e,t)}function v(n,e,t){var r=n.textContent.split(x.expRX);if(r.length>1){var o=n.parentNode;r.forEach(function(r){if(r.trim()){var u=document.createTextNode(r);o.insertBefore(u,n),l(u,e,t)}}),o.removeChild(n)}}function p(n,e,t){var r=void 0;return _=n,E(_,"_uav",[]),i(n,function(o){f(n,o,e,t)&&(r=!0)}),r?n:(Array.from(n.childNodes).forEach(function(n){3===n.nodeType?v(n,e,t):p(n,e,t,t)}),n)}function s(n){return!(!n||!A(n,"object")||n._uav||n.tagName)}function m(n,e){n&&n._uav&&e&&(Object.keys(n).forEach(function(t){m(n[t],e[t])}),e._uav=n._uav,n=null)}function h(e){if(!s(e))return e;var t={};return Array.isArray(e)&&(E(t=[],"_loops",[]),n(t)),E(t,"_uav",{}),E(t,"_watch",function(n,r){e[r]=h(n),Object.defineProperty(t,r,{get:function(){if(d){var n=d;t._uav[r]=t._uav[r]||[],t._uav[r].push(n),_._uav.push(function(){if(t._uav[r]){var e=t._uav[r].indexOf(n);t._uav[r].splice(e,1)}n=null})}return x.lastAccessed={vm:t,key:r},e[r]},set:function(n){if(e[r]!==n||A(n,"object")){var o=n&&n._uav;n=h(n),!o&&e[r]&&e[r]._uav&&m(e[r],n),e[r]=n,t._uav[r]&&t._uav[r].forEach(function(n){return n()}),t._loops&&t._loops.forEach(function(n){return n.binding(e[r],r)})}},enumerable:!0,configurable:!0})}),Object.keys(e).forEach(function(n){return t._watch(e[n],n)}),t}Array.from||(Array.from=function(n){return[].slice.call(n)});var d=void 0,_=void 0,g=[],y="_u_badexp",b=function(n){return document.createElement(n)},A=function(n,e){return typeof n===e},E=function(n,e,t){return Object.defineProperty(n,e,{value:t,configurable:!0,writable:!0,enumerable:!1})},x=window.uav=function(n,t){return t?e(n,t):document.querySelector(n)||b("div")};t("{","}");var T=function(n){return n.replace(x.tagRX,"")};g.push(function(n,e,t){if("uav-loop"===e.name){var o=n.getAttribute("uav-as").split(",");n.removeAttribute("uav-as");var a={node:n,as:o[0],index:o[1],html:n.innerHTML,remove:function(e){n.children[e]&&(u(n.children[e]),n.children[e].remove())},binding:function(n,e){var o=a.node.children[e],i=r(a.html,a.node),c=t[a.as],f=t[a.index],l={set:function(t){t[a.as]=n,a.index&&(t[a.index]=e)},reset:function(n){n[a.as]=c,a.index&&(n[a.index]=f)}};o?(u(o),a.node.replaceChild(p(i,t,l),o)):a.node.appendChild(p(i,t,l))}};return{loop:!0,tmpl:e.value,one:!0,replace:function(e){n.innerHTML="",-1===(e=h(e))._loops.indexOf(a)&&e._loops.push(a),e.forEach(a.binding)}}}}),g.push(function(n,e){if("style"===e.name||"uav-style"===e.name){var t=e.value,r=t;return{tmpl:t,replace:function(n,e){r=r.replace(e,n)},commit:function(){n.style.cssText=r,r=t}}}}),g.push(function(n,e){if("uav-src"===e.name){var t=e.value,r=t;return{tmpl:t,replace:function(n,e){r=r.replace(e,n)},commit:function(){n.setAttribute("src",r),r=t}}}}),g.push(function(n,e){if("uav-attr"===e.name){var t=void 0;return{tmpl:e.value,replace:function(e){t&&n.removeAttribute(t),e&&(n.setAttribute(e,""),t=e)}}}}),x.attributes=g,x.evaluate=o,x.stripTags=T,x.all=e,x.component=function(n,e,t){var o=arguments;if(A(n,"string")?(n={_el:r(n)},t=e):(n=h(n))._el=p(r(e),n),A(t,"string")||t&&t.tagName){var a=t.tagName?t:x(t),i=a.firstElementChild;setTimeout(function(){return u(i)}),a.innerHTML="",a.appendChild(n._el)}for(var c=0;c<arguments.length&&"break"!==function(e){if(A(o[e],"function"))return setTimeout(function(){return o[e](n._el)}),"break"}(c);c++);return n},x.model=h,x.parse=r,x.setTag=t,x.unbind=u,"undefined"!=typeof module&&module.exports&&(module.exports=x)}();