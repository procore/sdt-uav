!function(){function e(e,n,t){T(n,e,function(){for(var r=arguments.length,u=Array(r),o=0;o<r;o++)u[o]=arguments[o];Array.prototype[e].apply(n,u),t(Array.from(n))})}function n(n,t){_.forEach(function(r){return e(r,n,t)})}function t(e,n){var t=Array.from(document.querySelectorAll(e));return n?t.forEach(n):t}function r(e,n){N.tagRX=new RegExp("(^"+e+"|"+n+"$)","g"),N.expRX=new RegExp("("+e+".*?"+n+")","g")}function u(e,n){var t=n?n.cloneNode():E("div");return t.innerHTML=e,t.children.length>1&&console.error("Only 1 root node allowed."),t.firstElementChild}function o(e,n){try{return new Function("with(arguments[0]){return "+e+"}")(n)}catch(e){return g}}function a(e){e&&e._uav&&(Array.from(e.children).forEach(a),e._uav.forEach(function(e){return e()}),e=null)}function i(e,n,t){var r=e.one?[e.tmpl]:e.tmpl.match(N.expRX);if(r){!function u(a){r.forEach(function(r){var i=C(r);t&&t.set(n),a&&(y=u);var c=o(i,n);t&&t.reset(n),y=null,x(c,"boolean")?c=c?i:"":void 0!==c&&null!==c&&c!==g||(c=""),e.replace(c,r)}),e.commit&&e.commit()}(!0)}}function c(e,n){Array.from(e.attributes).filter(function(e){return e.specified}).map(function(e){return{name:e.name,value:e.value}}).forEach(function(e){return n(e)}),e.value&&n({name:"value",value:e.value})}function f(e,n){var t=n.value,r=t;return{tmpl:t,replace:function(e,n){r=x(e,"function")?e:r.replace(n,e)},commit:function(){x(r,"function")?(e.removeAttribute(n.name),e[n.name]=r):e.setAttribute(n.name,r),r=t}}}function l(e,n,t,r){for(var u=void 0,o=0;o<A.length;o++){var a=A[o](e,n,t);a&&(e.removeAttribute(n.name),i(a,t,r),a.loop&&(u=!0))}return i(f(e,n),t,r),u}function v(e,n,t){i({tmpl:e.textContent,replace:function(n){if(n.tagName||n._el){var t=n._el?n._el:n;t!==e&&a(e),e.parentNode&&(e.parentNode.replaceChild(t,e),e=t)}else try{e.textContent=n}catch(n){e.innerHTML=""}}},n,t)}function m(e,n,t){var r=e.textContent.split(N.expRX),u=e.parentNode,o=e;r.forEach(function(e){if(e){var r=document.createTextNode(e);u.insertBefore(r,o.nextSibling),v(r,n,t),o=r}}),u.removeChild(e)}function p(e,n,t){var r=void 0;return b=e,T(b,"_uav",[]),c(e,function(u){l(e,u,n,t)&&(r=!0)}),r?e:(Array.from(e.childNodes).forEach(function(e){3===e.nodeType?m(e,n,t):p(e,n,t)}),e)}function s(e){return!(!e||!x(e,"object")||e._uav||e.tagName)}function d(e,n){e&&e._uav&&n&&(Object.keys(e).forEach(function(t){d(e[t],n[t])}),n._uav=e._uav,e=null)}function h(e){if(!s(e))return e;var t=Array.isArray(e)?[]:{};return T(t,"_uav",{}),Object.keys(e).forEach(function(r){function u(e){return s(e)&&(e=h(e),Array.isArray(e)&&n(e,o)),e}function o(n){(e[r]!==n||x(n,"object"))&&(s(n)&&(n=u(n),e[r]&&e[r]._uav&&d(e[r],n)),e[r]=n,t._uav[r]&&t._uav[r].forEach(function(e){return e()}))}e[r]=u(e[r]),Object.defineProperty(t,r,{get:function(){if(y){var n=y;t._uav[r]=t._uav[r]||[],t._uav[r].push(n),b._uav.push(function(){var e=t._uav[r].indexOf(n);t._uav[r].splice(e,1),n=null})}return N.lastAccessed={vm:t,key:r},e[r]},set:o,enumerable:!0,configurable:!0})}),t}Array.from||(Array.from=function(e){return[].slice.call(e)});var y=void 0,b=void 0,A=[],_=["push","pop","reverse","shift","sort","splice","unshift"],g="_u_badexp",E=function(e){return document.createElement(e)},x=function(e,n){return typeof e===n},T=function(e,n,t){return Object.defineProperty(e,n,{value:t,configurable:!0,writable:!0,enumerable:!1})},N=window.uav=function(e,n){return n?t(e,n):document.querySelector(e)||E("div")};r("{","}");var C=function(e){return e.replace(N.tagRX,"")};A.push(function(e,n,t){if("uav-loop"===n.name){var r=u(e.innerHTML,e),o=e.getAttribute("uav-as").split(","),i=o[0],c=o[1];return e.removeAttribute("uav-as"),{loop:!0,tmpl:n.value,one:!0,replace:function(n){n=h(n),Array.from(e.children).forEach(a),e.innerHTML="",n.forEach(function(u,o){function a(u){var f=r.cloneNode();f.innerHTML=r.innerHTML,u&&(y=a);var l=t[i],v=t[c],m={set:function(e){e[i]=n[o],e[c]=o},reset:function(e){e[i]=l,e[c]=v}};e.children[o]?e.replaceChild(p(f,t,m),e.children[o]):e.appendChild(p(f,t,m)),y=null}a(!0)})}}}}),A.push(function(e,n){if("style"===n.name||"uav-style"===n.name){var t=n.value,r=t;return{tmpl:t,replace:function(e,n){r=r.replace(n,e)},commit:function(){e.style.cssText=r,r=t}}}}),A.push(function(e,n){if("uav-src"===n.name){var t=n.value,r=t;return{tmpl:t,replace:function(e,n){r=r.replace(n,e)},commit:function(){e.setAttribute("src",r),r=t}}}}),A.push(function(e,n){if("uav-attr"===n.name){var t=void 0;return{tmpl:n.value,replace:function(n){t&&e.removeAttribute(t),n&&(e.setAttribute(n,""),t=n)}}}}),N.attributes=A,N.evaluate=o,N.stripTags=C,N.all=t,N.component=function(e,n,t){var r=arguments;if(x(e,"string")?(e={_el:u(e)},t=n):(e=h(e))._el=p(u(n),e),x(t,"string")||t&&t.tagName){var o=t.tagName?t:N(t),i=o.firstElementChild;requestAnimationFrame(function(){return a(i)}),o.innerHTML="",o.appendChild(e._el)}for(var c=0;c<arguments.length&&"break"!==function(n){if(x(r[n],"function"))return requestAnimationFrame(function(){return r[n](e._el)}),"break"}(c);c++);return e},N.model=h,N.parse=u,N.setTag=r,N.unbind=a,"undefined"!=typeof module&&module.exports&&(module.exports=N)}();