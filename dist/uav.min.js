function _defineProperty(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}!function(){"use strict";function e(e,n){var t=Array.from(document.querySelectorAll(e));return n&&t.forEach(n),t}function n(n,t){return t?e(n,t):document.querySelector(n)||document.createElement("div")}function t(e){return!e||"object"!=typeof e||e._uav||e.tagName}function r(e,n){e&&e._uav&&!t(n)&&(Object.keys(e).forEach(function(t){r(e[t],n[t])}),n._uav=e._uav,e=null)}function u(e){if(t(e))return e;var a={};return Array.isArray(e)&&(a=[],v.defineProp(a,"_loops",[]),m(a)),v.defineProp(a,"_uav",{}),v.defineProp(a,"_watch",function(t,o){e[o]=u(t),Object.defineProperty(a,o,{get:function(){if(n.state){var t=n.state;a._uav[o]=a._uav[o]||[],a._uav[o].push(t),n.node._uav.push(function(){if(a._uav[o]){var e=a._uav[o].indexOf(t);a._uav[o].splice(e,1)}t=null})}return n.lastAccessed={vm:a,key:o},e[o]},set:function(n){if(e[o]!==n){var t=n&&n._uav;n=u(n),!t&&e[o]&&e[o]._uav&&r(e[o],n),e[o]=n,a._loops&&a._loops.forEach(function(n){return n.replace(e[o],o)}),a._uav[o]&&a._uav[o].forEach(function(e){e.binding(e)})}},configurable:!0,enumerable:!0})}),Object.keys(e).forEach(function(n){return a._watch(e[n],n)}),a}function a(e,t){var r=function(e){return function(n){e.checked=t(n.vm,n.ctx).toString()===e.value}};e.push(function(e){return e.el.addEventListener("change",function(){t(e.vm,e.ctx),n.lastAccessed.vm[n.lastAccessed.key]=e.el.value,n.lastAccessed=null}),v.bindStep(r(e.el),e),e})}function o(e,t){var r=function(e){return function(n){var r=t(n.vm,n.ctx);Array.isArray(r)?e.checked=-1!==r.map(String).indexOf(e.value):e.checked=!!r}};e.push(function(e){e.el.addEventListener("change",function(){var r=t(e.vm,e.ctx);if(Array.isArray(r)){var u=r.indexOf(e.el.value);-1===u&&e.el.checked?r.push(e.el.value):-1===u||e.el.checked||r.splice(u,1)}else n.lastAccessed.vm[n.lastAccessed.key]=e.el.checked;return n.lastAccessed=null,e});var u=t(e.vm,e.ctx);if(Array.isArray(u)){var a=function(){return r(e.el)(e)};u._loops.push({append:a,remove:a,replace:a})}return v.bindStep(r(e.el),e)})}function c(e,t){var r=function(e){return function(n){e.value=t(n.vm,n.ctx)}};e.push(function(e){return e.el.addEventListener("input",function(){t(e.vm,e.ctx),n.lastAccessed.vm[n.lastAccessed.key]=e.el.value,n.lastAccessed=null}),v.bindStep(r(e.el),e),e})}function i(e,n){var t=v.stripTags(e.value),r=y(t),u=function(e){return function(n){var u=r(n.vm,n.ctx);t&&e.removeAttribute(t),!1!==u&&(t=!0===u?t:u)&&e.setAttribute(t,"")}};n.push(function(e){return v.bindStep(u(e.el),e)})}function l(e,t){var r=e.value.match(n.expRX),u=r.map(v.stripTags),a=u.map(y),o=e.value,c=e.name.substring(2),i=function(e){return function(n){for(var t=o,i=0;i<a.length;i++){var l=a[i](n.vm,n.ctx);switch(typeof l){case"function":return void(e[c]=l);case"boolean":l=l?u[i]:""}t=t.replace(r[i],l)}e.setAttribute(c,t)}};t.push(function(e){return v.bindStep(i(e.el),e)})}function f(e,n,t){if(0===e.name.indexOf("u-")){switch(e={name:e.name,value:e.value},t.removeAttribute(e.name),e.name){case"u-for":return g(e,n,t);case"u-attr":return i(e,n);case"u-bind":return b(e,n,t)}l(e,n)}else n.push(function(n){return n.el.setAttribute(e.name,e.value),n})}function s(e,n,t){var r=y(t),u=function(e){return function(n){var t=r(n.vm,n.ctx);if(t&&(t._el||t.tagName)){var u=t._el?t._el:t;u!==e&&v.unbind(e),e.parentNode&&(e.parentNode.replaceChild(u,e),e=u)}else e.textContent=t}};n.push(function(e){var n=document.createTextNode("");return e.el.appendChild(n),v.bindStep(u(n),e)})}function p(e,t){var r=e.textContent.split(n.expRX);if(r.length>1)r.forEach(function(e){if(e.trim()){var r=document.createTextNode(e);e.match(n.expRX)?s(r,t,v.stripTags(e)):t.push(function(e){return e.el.appendChild(r.cloneNode()),e})}});else{var u=e.textContent;t.push(function(e){return e.el.appendChild(document.createTextNode(u)),e})}}function d(e){var n=[];return n.root=function(){return e.cloneNode()},Array.from(e.attributes).forEach(function(t){f(t,n,e)}),e.value&&f({name:"value",value:e.value},n,e),Array.from(e.childNodes).forEach(function(e){if(3===e.nodeType)p(e,n);else{var t=d(e);n.push(function(e){return e.el.appendChild(v.render(t,e.vm,e.ctx)),e})}}),n}n.all=e;var v={defineProp:function(e,n,t){return Object.defineProperty(e,n,{value:t,configurable:!0,writable:!0,enumerable:!1})},unbind:function(e){e&&e._uav&&(Array.from(e.children).forEach(v.unbind),e._uav.forEach(function(e){return e()}),e=null)},setTag:function(e,t){n.tagRX=new RegExp("(^"+e+"|"+t+"$)","g"),n.expRX=new RegExp("("+e+".*?"+t+")","g")},stripTags:function(e){return e.replace(n.tagRX,"")},bindStep:function(e,t){return n.state=Object.assign({},t,{binding:e}),e(n.state),n.state=null,t},render:function(e,t,r){return n.node=e.root(),v.defineProp(n.node,"_uav",[]),[{vm:t,ctx:r,el:n.node}].concat(e).reduce(function(e,n){return n(e)}).el}},h=function(e,n){var t=n?n.cloneNode():document.createElement("div");return t.innerHTML=e,1!==t.children.length&&console.error("Template must have 1 root node:",e),t.firstElementChild},m=function(e){v.defineProp(e,"push",function(){for(var n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];var u=e.length;Array.prototype.push.apply(e,t);for(var a=u;a<u+t.length;a++)!function(n){e._watch(e[n],n),e._loops.forEach(function(t){return t.append(e[n],n)})}(a);return e}),v.defineProp(e,"pop",function(){return e._loops.forEach(function(n){return n.remove(e.length-1)}),Array.prototype.pop.call(e)}),v.defineProp(e,"shift",function(){return e._loops.forEach(function(e){return e.remove(0)}),Array.prototype.shift.call(e)}),v.defineProp(e,"splice",function(){for(var n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];for(var u=e.length,a=t.shift(),o=t.shift(),c=Array.prototype.splice.apply(e,[a,o].concat(t)),i=u;i<e.length;i++)!function(n){e._watch(e[n],n),e._loops.forEach(function(t){return t.append(e[n],n)})}(i);for(i=e.length;i<u;i++)!function(n){e._loops.forEach(function(e){return e.remove(n)})}(i);return c}),v.defineProp(e,"unshift",function(){for(var n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];var u=e.length;Array.prototype.unshift.apply(e,t);for(var a=u;a<e.length;a++)!function(n){e._watch(e[n],n),e._loops.forEach(function(t){return t.append(e[n],n)})}(a);return e})},y=function(e){var n=new Function("with(arguments[0]){with(arguments[1]){return "+e+"}}");return function(e,t){var r=void 0;try{r=n(e,t||{})}catch(e){r=""}return void 0===r||null===r?"":r}},g=function(e,t,r){var a=v.stripTags(e.value).split(" as "),o=y(a[0]),c=a[1].split(","),i=c[0].trim(),l=c[1]?c[1].trim():null,f=d(r.firstElementChild);r.innerHTML="";var s=function(e){return function(t){function r(e,n){var r;return v.render(f,t.vm,Object.assign({},t.ctx,(r={},_defineProperty(r,i,e),_defineProperty(r,l,n),r)))}Array.from(e.children).forEach(v.unbind),e.innerHTML="";var a=u(o(t.vm,t.ctx)||[]);n.state=null;var c={append:function(n,t){var u=r(n,t);e.appendChild(u)},remove:function(n){e.children[n]&&(v.unbind(e.children[n]),e.children[n].remove())},replace:function(n,t){var u=e.children[t],a=r(n,t);u?(v.unbind(u),e.replaceChild(a,u)):e.appendChild(a)}};a._loops.push(c),a.forEach(c.append)}};t.push(function(e){return v.bindStep(s(e.el),e)})},b=function(e,n,t){var r=y(v.stripTags(e.value));switch(t.getAttribute("type")){case"radio":a(n,r);break;case"checkbox":o(n,r);break;default:c(n,r)}};Array.from||(Array.from=function(e){return e?[].slice.call(e):[]}),v.setTag("{","}"),n.component=function(e,t,r){var a=arguments,o=d(e.tagName?e:h(e));(t=u(t))._el=v.render(o,t),r&&("string"==typeof r&&(r=n(r)),r.tagName&&(n.unbind(r.firstElementChild),r.innerHTML="",r.appendChild(t._el)));for(var c=1;c<arguments.length&&"break"!==function(e){if("function"==typeof a[e])return setTimeout(function(){return a[e](t._el)}),"break"}(c);c++);return t},n.model=u,n.parse=h,n.setTag=v.setTag,n.unbind=v.unbind,window.uav=n,"undefined"!=typeof module&&module.exports&&(module.exports=n)}();