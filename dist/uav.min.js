!function(){"use strict";function e(e,n){var t=Array.from(document.querySelectorAll(e));return n&&t.forEach(n),t}function n(n,t){return t?e(n,t):document.querySelector(n)||document.createElement("div")}function t(e){return!e||"object"!=typeof e||e.tagName}function r(e,n){e&&e._uav&&!t(n)&&(Object.keys(e).forEach(function(t){r(e[t],n[t])}),n._uav=e._uav,e=null)}function u(e,a,o){if(t(e)||e._uav)return e;var i={};return Array.isArray(e)&&(i=[],s.defineProp(i,"_loops",[]),m(i,function(){a&&a._uav[o]&&a._uav[o].forEach(function(e){return e.binding.isLoop||e.binding(e)})})),s.defineProp(i,"_uav",{}),s.defineProp(i,"_watch",function(t,a){e[a]=u(t,i,a),Object.defineProperty(i,a,{get:function(){if(n.state){var t=n.state;i._uav[a]=i._uav[a]||[],i._uav[a].push(t),n.node._uav.push(function(){i._uav[a]&&i._uav[a].splice(i._uav[a].indexOf(t),1),t=null})}return n.last={vm:i,key:a},e[a]},set:function(t){if(e[a]!==t){var o=t&&t._uav;t=u(t,i,a),!o&&e[a]&&e[a]._uav&&r(e[a],t),e[a]=t,i._loops&&i._loops.forEach(function(n){return n.replace(e[a],a)}),n._pause||i._uav[a]&&i._uav[a].forEach(function(e){return e.binding(e)})}},configurable:!0,enumerable:!0})}),Object.keys(e).forEach(function(n){return i._watch(e[n],n)}),i}function a(e,t){var r=function(e){return function(n){e.checked=t(n.vm,n.ctx).toString()===e.value}};e.push(function(e){return e.el.addEventListener("change",function(){t(e.vm,e.ctx),n.last.vm[n.last.key]=e.el.value,n.last=null}),s.bindStep(r(e.el),e),e})}function o(e,t){var r=function(e){return function(r){var u=t(r.vm,r.ctx);n.state=null,Array.isArray(u)?e.checked=-1!==u.map(String).indexOf(e.value):e.checked=!!u}};e.push(function(e){e.el.addEventListener("change",function(){var r=t(e.vm,e.ctx);if(Array.isArray(r)){var u=r.indexOf(e.el.value);-1===u&&e.el.checked?r.push(e.el.value):-1===u||e.el.checked||r.splice(u,1)}else n.last.vm[n.last.key]=e.el.checked;return n.last=null,e});var u=t(e.vm,e.ctx);if(Array.isArray(u)){var a=function(){return r(e.el)(e)};u._loops.push({add:a,remove:a,replace:a})}return s.bindStep(r(e.el),e)})}function i(e,t){var r=function(e){return function(n){e.value=t(n.vm,n.ctx)}};e.push(function(e){return e.el.addEventListener("input",function(){t(e.vm,e.ctx),n.last.vm[n.last.key]=e.el.value,n.last=null}),s.bindStep(r(e.el),e),e})}function c(e,n){var t=s.stripTags(e.value),r=_(t),u=function(e){return function(n){var u=r(n.vm,n.ctx);t&&e.removeAttribute(t),!1!==u&&(t=!0===u?t:u)&&e.setAttribute(t,"")}};n.push(function(e){return s.bindStep(u(e.el),e)})}function l(e,t){var r=e.value.match(n.expRX),u=r.map(s.stripTags),a=u.map(_),o=e.value,i=e.name.substring(2),c=function(e){return function(n){for(var t=o,c=0;c<a.length;c++){var l=a[c](n.vm,n.ctx);switch(typeof l){case"function":return void(e[i]=l);case"boolean":l=l?u[c]:""}t=t.replace(r[c],l)}e.setAttribute(i,t)}};t.push(function(e){return s.bindStep(c(e.el),e)})}function f(e,n,t){if(0===e.name.indexOf("u-")){switch(e={name:e.name,value:e.value},t.removeAttribute(e.name),e.name){case"u-for":return g(e,n,t);case"u-attr":return c(e,n);case"u-bind":return y(e,n,t)}l(e,n)}else n.push(function(n){return n.el.setAttribute(e.name,e.value),n})}function p(e,n){var t=_(n),r=function(e){return function(n){var r=t(n.vm,n.ctx);if(r&&(r._el||r.tagName)){var u=r._el?r._el:r;u!==e&&s.unbind(e),e.parentNode&&(e.parentNode.replaceChild(u,e),e=u)}else e.textContent=r}};e.push(function(e){var n=document.createTextNode("");return e.el.appendChild(n),s.bindStep(r(n),e)})}function v(e,t){var r=e.textContent.split(n.expRX);if(r.length>1)r.forEach(function(e){if(e.trim()){var r=document.createTextNode(e);e.match(n.expRX)?p(t,s.stripTags(e)):t.push(function(e){return e.el.appendChild(r.cloneNode()),e})}});else{var u=e.textContent;t.push(function(e){return e.el.appendChild(document.createTextNode(u)),e})}}function d(e){var n=[];return n.root=function(){return e.cloneNode()},Array.from(e.attributes).forEach(function(t){f(t,n,e)}),e.value&&f({name:"value",value:e.value},n,e),Array.from(e.childNodes).forEach(function(e){if(3===e.nodeType)v(e,n);else{var t=d(e);n.push(function(e){return e.el.appendChild(s.render(t,e.vm,e.ctx)),e})}}),n}n.all=e;var s={defineProp:function(e,n,t){return Object.defineProperty(e,n,{value:t,configurable:!0,writable:!0,enumerable:!1})},unbind:function(e){e&&e._uav&&(Array.from(e.children).forEach(s.unbind),e._uav.forEach(function(e){return e()}),e=null)},setTag:function(e,t){n.tagRX=new RegExp("(^"+e+"|"+t+"$)","g"),n.expRX=new RegExp("("+e+".*?"+t+")","g")},stripTags:function(e){return e.replace(n.tagRX,"")},bindStep:function(e,t){return n.state=Object.create(t),n.state.binding=e,e(n.state),n.state=null,t},render:function(e,t,r){return n.node=e.root(),s.defineProp(n.node,"_uav",[]),[{vm:t,ctx:r,el:n.node}].concat(e).reduce(function(e,n){return n(e)}).el}},h=function(e,n){var t=n?n.cloneNode():document.createElement("div");return t.innerHTML=e,1!==t.children.length&&console.error("Template must have 1 root node:",e),t.firstElementChild},m=function(e,t){s.defineProp(e,"fill",function(r){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length;for(n._pause=!0;u<0;)u+=e.length;for(;a<0;)a+=e.length;var o=e._uav[0];Array.prototype.fill.apply(e,[r,u,a]);for(var i=e.length;i<a;i++)!function(n){e._watch(r,n),e._loops.forEach(function(e){return e.add(r,n)}),e._uav[n]=o}(i);return t(),delete n._pause,e}),s.defineProp(e,"push",function(){for(var n=arguments.length,r=Array(n),u=0;u<n;u++)r[u]=arguments[u];var a=e.length,o=e._uav[0];Array.prototype.push.apply(e,r);for(var i=a;i<a+r.length;i++)!function(n){e._watch(e[n],n),e._loops.forEach(function(t){return t.add(e[n],n)}),e._uav[n]=o}(i);return t(),e}),s.defineProp(e,"pop",function(){var n=e.length-1;e._loops.forEach(function(e){return e.remove(n)});var r=Array.prototype.pop.call(e);return delete e._uav[n],t(),r}),s.defineProp(e,"reverse",function(){n._pause=!0;var r=Array.prototype.reverse.call(e);return t(),delete n._pause,r}),s.defineProp(e,"shift",function(){e._loops.forEach(function(e){return e.remove(0)});var n=Array.prototype.shift.call(e);return delete e._uav[0],t(),n}),s.defineProp(e,"sort",function(r){n._pause=!0;var u=Array.prototype.sort.call(e,r);return t(),delete n._pause,u}),s.defineProp(e,"splice",function(){for(var r=arguments.length,u=Array(r),a=0;a<r;a++)u[a]=arguments[a];n._pause=!0;for(var o=e.length,i=e._uav[0],c=Array.prototype.splice.apply(e,[u.shift(),u.shift()].concat(u)),l=o;l<e.length;l++)!function(n){e._watch(e[n],n),e._loops.forEach(function(t){return t.add(e[n],n)}),e._uav[n]=i}(l);for(l=e.length;l<o;l++)!function(n){e._loops.forEach(function(e){return e.remove(n)}),delete e._uav[n]}(l);return t(),delete n._pause,c}),s.defineProp(e,"unshift",function(){for(var n=arguments.length,r=Array(n),u=0;u<n;u++)r[u]=arguments[u];var a=e.length,o=e._uav[0];Array.prototype.unshift.apply(e,r);for(var i=a;i<e.length;i++)!function(n){e._watch(e[n],n),e._loops.forEach(function(t){return t.add(e[n],n)}),e._uav[n]=o}(i);return t(),e})},_=function(e){var n=new Function("with(arguments[0]){with(arguments[1]){return "+e+"}}");return function(e,t){var r=void 0;try{r=n(e,t||{})}catch(e){r=""}return void 0===r||null===r?"":r}},g=function(e,t,r){var a=s.stripTags(e.value).split(" as "),o=_(a[0]),i=a[1].split(","),c=i[0].trim(),l=i[1]?i[1].trim():null,f=d(r.firstElementChild);r.innerHTML="";var p=function(e){return function(t){function r(e,n){var r=t.ctx?Object.create(t.ctx):{};return r[c]=e,r[l]=n,s.render(f,t.vm,r)}Array.from(e.children).forEach(s.unbind),e.innerHTML="";var a=u(o(t.vm,t.ctx)||[]);n.state=null;var i={add:function(n,t){var u=r(n,t);e.appendChild(u)},remove:function(n){e.children[n]&&(s.unbind(e.children[n]),e.children[n].remove())},replace:function(n,t){var u=e.children[t],a=r(n,t);u?(s.unbind(u),e.replaceChild(a,u)):e.appendChild(a)}};a._loops.push(i),a.forEach(i.add)}};t.push(function(e){var n=p(e.el);return n.isLoop=!0,s.bindStep(n,e)})},y=function(e,n,t){var r=_(s.stripTags(e.value));switch(t.getAttribute("type")){case"radio":a(n,r);break;case"checkbox":o(n,r);break;default:i(n,r)}};Array.from||(Array.from=function(e){return e?[].slice.call(e):[]}),s.setTag("{","}"),n.component=function(e,t,r){var a=arguments,o=h(e.innerHTML||e);if(!t)return o;var i=d(o);(t=u(t))._el=s.render(i,t),r&&("string"==typeof r&&(r=n(r)),r.tagName&&(n.unbind(r.firstElementChild),r.innerHTML="",r.appendChild(t._el)));for(var c=1;c<arguments.length&&"break"!==function(e){if("function"==typeof a[e])return setTimeout(function(){return a[e](t._el)}),"break"}(c);c++);return t},n.model=u,n.parse=h,n.setTag=s.setTag,n.unbind=s.unbind,window.uav=n,"undefined"!=typeof module&&module.exports&&(module.exports=n)}();