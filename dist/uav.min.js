function _defineProperty(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}!function(){"use strict";function e(e,n){var t=Array.from(document.querySelectorAll(e));return n&&t.forEach(n),t}function n(n,t){return t?e(n,t):document.querySelector(n)||document.createElement("div")}function t(e,n){e&&e._uav&&n&&(Object.keys(e).forEach(function(r){t(e[r],n[r])}),n._uav=e._uav,e=null)}function r(e){if(!e||"object"!=typeof e||e._uav||e.tagName)return e;var u={};return Array.isArray(e)&&(u=[],d.defineProp(u,"_loops",[]),h(u)),d.defineProp(u,"_uav",{}),d.defineProp(u,"_watch",function(a,o){e[o]=r(a),Object.defineProperty(u,o,{get:function(){if(n.state){var t=n.state;u._uav[o]=u._uav[o]||[],u._uav[o].push(t),n.node._uav.push(function(){if(u._uav[o]){var e=u._uav[o].indexOf(t);u._uav[o].splice(e,1)}t=null})}return n.lastAccessed={vm:u,key:o},e[o]},set:function(n){if(e[o]!==n){var a=n&&n._uav;n=r(n),!a&&e[o]&&e[o]._uav&&t(e[o],n),e[o]=n,u._loops&&u._loops.forEach(function(n){return n.replace(e[o],o)}),u._uav[o]&&u._uav[o].forEach(function(e){return e.binding(e)})}},configurable:!0,enumerable:!0})}),Object.keys(e).forEach(function(n){return u._watch(e[n],n)}),u}function u(e,t){var r=function(e){return function(n){e.checked=t(n.vm,n.ctx).toString()===e.value}};e.push(function(e){return e.el.addEventListener("change",function(){t(e.vm,e.ctx),n.lastAccessed.vm[n.lastAccessed.key]=e.el.value,n.lastAccessed=null}),d.bindStep(r(e.el),e),e})}function a(e,t){var r=function(e){return function(n){var r=t(n.vm,n.ctx);Array.isArray(r)?e.checked=-1!==r.map(String).indexOf(e.value):e.checked=!!r}};e.push(function(e){e.el.addEventListener("change",function(){var r=t(e.vm,e.ctx);if(Array.isArray(r)){var u=r.indexOf(e.el.value);-1===u&&e.el.checked?r.push(e.el.value):-1===u||e.el.checked||r.splice(u,1)}else n.lastAccessed.vm[n.lastAccessed.key]=e.el.checked;return n.lastAccessed=null,e});var u=t(e.vm,e.ctx);if(Array.isArray(u)){var a=function(){return r(e.el)(e)};u._loops.push({append:a,remove:a,replace:a})}return d.bindStep(r(e.el),e)})}function o(e,t){var r=function(e){return function(n){e.value=t(n.vm,n.ctx)}};e.push(function(e){return e.el.addEventListener("input",function(){t(e.vm,e.ctx),n.lastAccessed.vm[n.lastAccessed.key]=e.el.value,n.lastAccessed=null}),d.bindStep(r(e.el),e),e})}function c(e,n){var t=d.stripTags(e.value),r=m(t),u=function(e){return function(n){var u=r(n.vm,n.ctx);t&&e.removeAttribute(t),!1!==u&&(t=!0===u?t:u)&&e.setAttribute(t,"")}};n.push(function(e){return d.bindStep(u(e.el),e)})}function i(e,t){var r=e.value.match(n.expRX),u=r.map(d.stripTags),a=u.map(m),o=e.value,c=e.name.substring(2),i=function(e){return function(n){for(var t=o,i=0;i<a.length;i++){var l=a[i](n.vm,n.ctx);switch(typeof l){case"function":return void(e[c]=l);case"boolean":l=l?u[i]:""}t=t.replace(r[i],l)}e.setAttribute(c,t)}};t.push(function(e){return d.bindStep(i(e.el),e)})}function l(e,n,t){if(0===e.name.indexOf("u-")){switch(e.name){case"u-for":return g(e,n,t);case"u-attr":return c(e,n);case"u-bind":return b(e,n,t)}i(e,n)}else n.push(function(n){return n.el.setAttribute(e.name,e.value),n})}function f(e,n,t){var r=m(t),u=function(e){return function(n){var t=r(n.vm,n.ctx);if(t._el||t.tagName){var u=t._el?t._el:t;u!==e&&d.unbind(e),e.parentNode&&(e.parentNode.replaceChild(u,e),e=u)}else e.textContent=t}};n.push(function(e){var n=document.createTextNode("");return e.el.appendChild(n),d.bindStep(u(n),e)})}function s(e,t){var r=e.textContent.split(n.expRX);r.length>1?r.forEach(function(e){if(e.trim()){var r=document.createTextNode(e);e.match(n.expRX)?f(r,t,d.stripTags(e)):t.push(function(e){return e.el.appendChild(r.cloneNode()),e})}}):t.push(function(n){return n.el.appendChild(e.cloneNode()),n})}function p(e){n.node=e,d.defineProp(n.node,"_uav",[]);var t=[];t.root=function(){return d.createElement(e.tagName)};for(var r=0;r<e.attributes.length;r++)l(e.attributes[r],t,e);return e.value&&l({name:"value",value:e.value},t,e),Array.from(e.childNodes).forEach(function(e){if(3===e.nodeType)s(e,t);else{var n=p(e);t.push(function(e){return e.el.appendChild(d.render(n,e.vm,e.ctx)),e})}}),t}n.all=e;var d={defineProp:function(e,n,t){return Object.defineProperty(e,n,{value:t,configurable:!0,writable:!0,enumerable:!1})},unbind:function(e){e&&e._uav&&(Array.from(e.children).forEach(d.unbind),console.log("removing "+e._uav.length+" bindings"),e._uav.forEach(function(e){return e()}),e=null)},setTag:function(e,t){n.tagRX=new RegExp("(^"+e+"|"+t+"$)","g"),n.expRX=new RegExp("("+e+".*?"+t+")","g")},stripTags:function(e){return e.replace(n.tagRX,"")},bindStep:function(e,t){return t.binding=e,n.state=t,e(t),n.state=null,t},render:function(e,n,t){return[{vm:n,ctx:t,el:e.root()}].concat(e).reduce(function(e,n){return n(e)}).el},createElement:function(e){return"svg"===e||"path"===e?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e)}},v=function(e,n){var t=n?n.cloneNode():document.createElement("div");return t.innerHTML=e,1!==t.children.length&&console.error("Template must have 1 root node:",e),t.firstElementChild},h=function(e){d.defineProp(e,"push",function(){for(var n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];var u=e.length;return t.forEach(function(n){return e._watch(n,e.length)}),e._loops.forEach(function(e){t.forEach(function(n,t){e.append(n,u+t)})}),e}),d.defineProp(e,"pop",function(){return e._loops.forEach(function(n){return n.remove(e.length-1)}),Array.prototype.pop.call(e)}),d.defineProp(e,"shift",function(){return e._loops.forEach(function(e){return e.remove(0)}),Array.prototype.shift.call(e)}),d.defineProp(e,"splice",function(){for(var n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];for(var u=e.length,a=t.shift(),o=t.shift(),c=Array.prototype.splice.apply(e,[a,o].concat(t)),i=u;i<e.length;i++)!function(n){e._watch(e[n],n),e._loops.forEach(function(t){return t.append(e[n],n)})}(i);for(i=e.length;i<u;i++)!function(n){e._loops.forEach(function(e){return e.remove(n)})}(i);return c}),d.defineProp(e,"unshift",function(){for(var n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];var u=e.length;Array.prototype.unshift.apply(e,t);for(var a=u;a<e.length;a++)!function(n){e._watch(e[n],n),e._loops.forEach(function(t){return t.append(e[n],n)})}(a);return e})},m=function(e){var n=new Function("with(arguments[0]){with(arguments[1]){return "+e+"}}");return function(e,t){var r=void 0;try{r=n(e,t||{})}catch(e){r=""}return r}},g=function(e,t,u){var a=d.stripTags(e.value).split(" as "),o=m(a[0]),c=a[1].split(","),i=c[0].trim(),l=c[1]?c[1].trim():null;u.removeAttribute("u-for");var f=p(u.firstElementChild);u.innerHTML="";var s=function(e){return function(t){function u(e,n){var r;return d.render(f,t.vm,Object.assign({},t.ctx,(r={},_defineProperty(r,i,e),_defineProperty(r,l,n),r)))}var a={append:function(n,t){var r=u(n,t);e.appendChild(r)},remove:function(n){e.children[n]&&(d.unbind(e.children[n]),e.children[n].remove())},replace:function(n,t){var r=e.children[t],a=u(n,t);r?(d.unbind(r),e.replaceChild(a,r)):e.appendChild(a)}},c=r(o(t.vm,t.ctx)||[]);c._loops.push(a),n.state=null,c.forEach(a.append)}};t.push(function(e){return e.binding=s(e.el),n.state=e,e.binding(e),e})},b=function(e,n,t){var r=m(d.stripTags(e.value));switch(t.getAttribute("type")){case"radio":u(n,r);break;case"checkbox":a(n,r);break;default:o(n,r)}};Array.from||(Array.from=function(e){return[].slice.call(e)}),d.setTag("{","}"),n.component=function(e,t,u){var a=arguments,o=p(e.tagName?e:v(e));(t=r(t))._el=d.render(o,t),u&&("string"==typeof u&&((u=n(u)).innerHTML=""),u.appendChild&&u.appendChild(t._el));for(var c=1;c<arguments.length&&"break"!==function(e){if("function"==typeof a[e])return setTimeout(function(){return a[e](t._el)}),"break"}(c);c++);return t},n.model=r,n.parse=v,n.setTag=d.setTag,window.uav=n}();