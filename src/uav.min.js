'use strict';var _typeof='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&'function'==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?'symbol':typeof a};function _toConsumableArray(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}(function(){function a(D,E,F){A(E,D,function(){for(var H=arguments.length,G=Array(H),I=0;I<H;I++)G[I]=arguments[I];Array.prototype[D].apply(E,G),F([].concat(_toConsumableArray(E)))})}function b(D,E){x.forEach(function(F){return a(F,D,E)})}function c(D,E){B.tagRX=new RegExp('(^'+D+'|'+E+'$)','g'),B.expRX=new RegExp('('+D+'.*?'+E+')','g')}function d(D,E){var F=E?E.cloneNode():z('div');return F.innerHTML=D,1<F.children.length&&console.error('Only 1 root node allowed.'),F.firstElementChild}function f(D,E,F){try{return new Function('with(arguments[0]){return '+D+'}').bind(E)(F||E)}catch(G){return y}}function g(D){D&&D._uav&&([].concat(_toConsumableArray(D.children)).forEach(g),D._uav.forEach(function(E){return E()}),D=null)}function h(D,E,F){var G=D.single?[D.tmpl]:D.tmpl.match(B.expRX);if(G){var H=function(I){G.forEach(function(J){var K=C(J);I&&(u=H);var L=f(K,E,F);u=null,'boolean'==typeof L?L=L?K:'':(L===void 0||null===L||L===y)&&(L=''),D.replace(L,J)}),D.commit&&D.commit()};H(!0)}}function j(D,E){var F=Array.from(D.attributes).filter(function(G){return G.specified}).map(function(G){return{name:G.name,value:G.value}});F.forEach(function(G){return E(G)}),D.value&&E({name:'value',value:D.value})}function k(D,E){var F=E.value,G=F;return{tmpl:F,replace:function replace(H,I){G='function'==typeof H?H:G.replace(I,H)},commit:function commit(){'function'==typeof G?D[E.name]=G:D.setAttribute(E.name,G),G=F}}}function l(D,E,F,G){for(var J,H=void 0,I=0;I<w.length;I++)J=w[I](D,E,F,G),J&&(D.removeAttribute(E.name),h(J,F,G),J.loop&&(H=!0));return h(k(D,E),F,G),H}function m(D,E,F){h({tmpl:D.textContent,replace:function replace(G){if(G.tagName||G._el){var H=G._el?G._el:G;H!==D&&g(D),D.parentNode&&(D.parentNode.replaceChild(H,D),D=H)}else try{D.textContent=G}catch(I){D.innerHTML=''}}},E,F)}function n(D,E,F){var G=D.textContent.split(B.expRX),H=D.parentNode,I=D;G.forEach(function(J){if(J){var K=document.createTextNode(J);H.insertBefore(K,I.nextSibling),m(K,E,F),I=K}}),H.removeChild(D)}function o(D,E,F){var G;return(v=D,A(v,'_uav',[]),j(D,function(H){l(D,H,E,F)&&(G=!0)}),G)?D:(Array.from(D.childNodes).forEach(function(H){3===H.nodeType?n(H,E,F):o(H,E,F)}),D)}function p(D){return!(!D||'object'!==('undefined'==typeof D?'undefined':_typeof(D))||D._uav||D.tagName)}function r(D,E){D._uav&&E&&(Object.keys(D).forEach(function(F){r(D[F],E[F])}),E._uav=D._uav,D=null)}function s(D){if(!p(D))return D;var E=Array.isArray(D)?[]:{};return A(E,'_uav',{}),Object.keys(D).forEach(function(F){function G(J){return p(J)&&(J=s(J),Array.isArray(J)&&b(J,I)),J}function I(J){(D[F]!==J||'object'===('undefined'==typeof J?'undefined':_typeof(J)))&&(p(J)&&(J=G(J),D[F]&&D[F]._uav&&r(D[F],J)),D[F]=J,E._uav[F]&&E._uav[F].forEach(function(K){return K()}))}D[F]=G(D[F]?D[F].valueOf():D[F]),Object.defineProperty(E,F,{get:function(){if(u){var J=u;E._uav[F]=E._uav[F]||[],E._uav[F].push(J),v._uav.push(function(){var K=E._uav[F].indexOf(J);E._uav[F].splice(K,1),J=null})}return B.lastAccessed={vm:E,key:F},D[F]},set:I,enumerable:!0,configurable:!0})}),E}var u,v,w=[],x=['push','pop','reverse','shift','sort','splice','unshift'],y='_u_badexp',z=function(D){return document.createElement(D)},A=function(D,E,F){return Object.defineProperty(D,E,{value:F,configurable:!0,writable:!0,enumerable:!1})},B=window.uav=function(D,E){if(E!==void 0){var F=Array.from(document.querySelectorAll(D));if('function'==typeof E)F.forEach(E);else if('number'==typeof E)return F[E]}else return document.querySelector(D)||z('div')};c('{','}');var C=function(D){return D.replace(B.tagRX,'')};w.push(function(D,E,F){if('uav-loop'===E.name){var G=d(D.innerHTML,D);return{loop:!0,tmpl:E.value,single:!0,replace:function replace(H){H=s(H),[].concat(_toConsumableArray(D.children)).forEach(g),D.innerHTML='',H.forEach(function(I,J){function K(L){var M=G.cloneNode();M.innerHTML=G.innerHTML,L&&(u=K);var N=F._index;F._index=J,D.children[J]?D.replaceChild(o(M,H[J],F),D.children[J]):D.appendChild(o(M,H[J],F)),F._index=N,u=null}K(!0)})}}}}),w.push(function(D,E){if('style'===E.name||'uav-style'===E.name){var F=E.value,G=F;return{tmpl:F,replace:function replace(H,I){G=G.replace(I,H)},commit:function commit(){D.style.cssText=G,G=F}}}}),w.push(function(D,E){if('uav-src'===E.name){var F=E.value,G=F;return{tmpl:F,replace:function replace(H,I){G=G.replace(I,H)},commit:function commit(){D.setAttribute('src',G),G=F}}}}),w.push(function(D,E){if(E.name.match(B.expRX)){var F;return{tmpl:E.name,replace:function replace(G){F&&D.removeAttribute(F),G&&(D.setAttribute(G,''),F=G)}}}}),B.attributes=w,B.evaluate=f,B.stripTags=C,B.component=function(D,E,F){if('string'==typeof D?(D={_el:d(D)},F=E):(D=s(D),D._el=o(d(E),D)),'string'==typeof F){var G=B(F),H=G.firstElementChild;requestAnimationFrame(function(){return g(H)}),G.innerHTML='',G.appendChild(D._el)}for(var I=0;I<arguments.length;I++)if('function'==typeof arguments[I]){arguments[I](D._el);break}return D},B.model=s,B.parse=d,B.placeholder=function(D){return{_el:z(D||'div')}},B.setTag=c,B.unbind=g,'undefined'!=typeof module&&module.exports&&(module.exports=B)})();