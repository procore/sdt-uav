"use strict";var _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(a){return"undefined"==typeof a?"undefined":_typeof2(a)}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":"undefined"==typeof a?"undefined":_typeof2(a)};(function(){function a(o){var p=document.createElement("div");return p.innerHTML=o,1<p.children.length&&console.error("Components must have only one root node."),p=p.firstElementChild,p}function b(o){return o&&"object"===("undefined"==typeof o?"undefined":_typeof(o))}function c(o,p){Object.keys(o).forEach(function(q){var r=o[q];Object.defineProperty(o,q,{get:function(){return r},set:function(t){r=t,p("_childPropertyModified")}}),b(o[q])&&c(o[q],p)})}function e(o,p){try{return new Function("with(arguments[0]){return "+o+";}")(p)}catch(q){return"_invalidExpression"}}function f(o,p,q,r){var s=o.match(/{.*?}/g);if(s){var t=function u(){var v,w=o;s.forEach(function(x){var y=x.substring(1,x.length-1);u.bound||r||(p._currentlyCreatingBinding=u),v=e(y,p),delete p._currentlyCreatingBinding;var z="undefined"==typeof v?"undefined":_typeof(v);w="boolean"===z?w.replace(x,v?y:""):"function"===z?v:void 0==v||"_invalidExpression"===v||null===v?w.replace(x,""):"object"===z?v._element?v._element:v:w.replace(x,v.toString())}),q(w)};t(),t.bound=!0}}function g(o,p){Array.from(o.childNodes).forEach(function(q){return p.appendChild(q.cloneNode(!0))})}function h(o,p){var q=Array.from(o.attributes).filter(function(r){return r.specified&&"as"!==r.name}).map(function(r){return{name:r.name,value:r.value}});q.forEach(function(r){p(r)}),o.value&&p({name:"value",value:o.value})}function j(o,p,q,r){"data-style"===p.name?f(p.value,q,function(s){s=s.split(";");for(var u,t=0;t<s.length;t++)u=s[t].split(":"),o.style[u[0]]=u[1]},r):f(p.value,q,function(s){"function"==typeof s?(o.removeAttribute(p.name),o[p.name]=s):o.setAttribute(p.name,s)},r)}function k(o,p,q){return h(o,function(r){if("loop"===r.name&&o.attributes.as){var s=function v(w){if(w){var x=document.createElement(o.tagName);if(Array.isArray(w)){var y=p[u];w.forEach(function(z){p[u]=z,g(t,x),k(x,p,v.bound)}),p[u]=y}else"string"==typeof u&&(u=u.split(".")),Object.keys(w).forEach(function(z){var A=p[u[0]],B=p[u[1]];p[u[0]]=z,p[u[1]]=w[z],g(t,x),k(x,p,v.bound),p[u[0]]=A,p[u[1]]=B});o.innerHTML="",Array.from(x.childNodes).forEach(function(z){return o.appendChild(z)})}},t=a("<div>"+o.innerHTML+"</div>"),u=o.attributes.as.value;f("{"+r.value+"}",p,s,q),s.bound=!0,o.removeAttribute("loop"),o.removeAttribute("as")}else j(o,r,p,q)}),Array.from(o.childNodes).forEach(function(r){if(3===r.nodeType)f(r.textContent,p,function(t){if(t)r.textContent=t;else if(r.innerHTML)for(;r.firstChild;)r.removeChild(r.firstChild)},q);else{var s=r.tagName.toLowerCase();void 0!==p[s]&&p[s]._element?f("{"+s+"}",p,function(t){r.parentNode===o&&(o.replaceChild(t,r),r=t)},q):k(r,p,q)}}),o}function m(o,p){return p?void Array.from(document.querySelectorAll(o)).forEach(p):document.querySelector(o)||document.createElement("div")}Array.from||(Array.from=function(o){return[].slice.call(o)}),m.model=function(o){var p={_bindings:{}};return Object.keys(o).forEach(function(q){function s(t){(o[q]!==t||"object"===("undefined"==typeof t?"undefined":_typeof(t)))&&("_childPropertyModified"!==t&&(b(t)&&c(t,s),o[q]=t),p._bindings[q]&&p._bindings[q].forEach(function(u){return u()}))}Object.defineProperty(p,q,{get:function(){return p._currentlyCreatingBinding&&(p._bindings[q]=p._bindings[q]||[],p._bindings[q].push(p._currentlyCreatingBinding)),o[q]},set:s}),b(o[q])&&c(o[q],s)}),p},m.component=function(o,p,q){if("string"==typeof o?(o={_element:a(o)},q=p):o._element=k(a(p),o),q){var r=document.querySelector(q);r.innerHTML="",r.appendChild(o._element)}return o},m.placeholder=function(o){return{_element:document.createElement(o||"div")}},"undefined"!=typeof module&&module.exports?module.exports=m:window.uav=m})();